(this["webpackJsonpthoth-search"]=this["webpackJsonpthoth-search"]||[]).push([[0],{270:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(41),o=n.n(r),l=n(202),c=n(42),s=new c.QueryClient({defaultOptions:{queries:{useErrorBoundary:!0,refetchOnWindowFocus:!1,retry:!1}}}),d=n(62),u=n(23),v=n(7),j=n(387),h=n(393),b=n(143),p=n(389),m=n(401),O=n(372),f=n(88),x=n(371),g=n(16),y=n(86),k=n(0),w=["children","value","index"],_=function(e){var t=e.children,n=e.value,a=e.index,i=Object(y.a)(e,w);return Object(k.jsx)("div",Object(g.a)(Object(g.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),className:"".concat(i.className)},i),{},{children:n===a&&t}))},E=n.p+"static/media/thoth-logo.1a28a729.png",A=n(31),C=n.n(A),S=n(53),N=n(395),L=n(394),P=n(38),R=function(e){var t=e.onChange,n=e.onEnter,a=e.label,i=e.helpertext,r=e.boxprops,o=e.error,l=void 0!==o&&o,c=e.lefticon,s=e.righticon;return Object(k.jsxs)(h.a,{children:[Object(k.jsx)(b.a,{variant:"body1",sx:{color:l?"error.main":"text.secondary"},children:a}),Object(k.jsxs)(L.a,Object(g.a)(Object(g.a)({component:"form",variant:"outlined",sx:{p:"8px 4px",display:"flex",alignItems:"center",borderColor:l?"red":void 0,paddingLeft:2,paddingRight:2}},r),{},{children:[c,Object(k.jsx)(P.c,Object(g.a)({sx:{ml:1,flex:1},placeholder:i,error:l,onChange:function(e){return t(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(n(),e.preventDefault())}},e)),s]}))]})},M=n(97),T=n.n(M),B=n(56),q=n.n(B),I="https://khemenu.thoth-station.ninja/api/v1",V={manipulation:{enabled:!1,editNode:function(e,t){e.fixed=!e.fixed.x,t(e)}},interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,selectable:!0},edges:{chosen:!1,smooth:!1,color:{color:"#5c6470"},arrowStrikethrough:!1,arrows:{from:{enabled:!0,type:"triangle"}}},nodes:{chosen:!1,color:{background:"#5c6470",border:"#fff",hover:{background:"#f39200",border:"#fff"}},shape:"dot",size:10,borderWidth:2,labelHighlightBold:!1,font:{color:"#393e46",strokeWidth:2,size:15}},physics:{hierarchicalRepulsion:{damping:.1,springLength:200},solver:"hierarchicalRepulsion",minVelocity:.15}},D=function(){var e=Object(S.a)(C.a.mark((function e(t,n){var a,i=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:"https://pypi.org/simple",e.abrupt("return",q.a.get(I+"/python/package/metadata",{params:{name:t,version:n,index:a},headers:{accept:"application/json"}}).catch((function(e){var a;if(404===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)||(null===e||void 0===e?void 0:e.isAxiosError))return W(t,n);throw e})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(e,t){return q.a.get("https://pypi.org/pypi/"+e+(t?"/"+t:"")+"/json").catch((function(){}))},z=function(e,t){return Object(c.useQueries)(e.map((function(e){return Object(g.a)(Object(g.a)({},t),{},{queryKey:["packageMetadata",e.name,e.version],queryFn:function(){return D(e.name,e.version)}})})))};var F=function(){var e=Object(u.g)(),t=Object(a.useState)(""),n=Object(v.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(""),l=Object(v.a)(o,2),c=l[0],s=l[1],d=function(){var t=Object(S.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==i){t.next=2;break}return t.abrupt("return");case 2:W(i).then((function(t){e("/package/"+t.data.info.name)})).catch((function(){s("Package does not exist")}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsxs)(j.a,{container:!0,justifyContent:"center",children:[Object(k.jsx)(j.a,{alignSelf:"flex-start",item:!0,xs:12,children:Object(k.jsx)(b.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null!==c&&void 0!==c?c:""})}),Object(k.jsxs)(j.a,{container:!0,spacing:2,item:!0,xs:12,children:[Object(k.jsx)(j.a,{item:!0,xs:12,md:10,children:Object(k.jsx)(R,{error:""!==c,onChange:function(e){return function(e){r(e.target.value),""!==c&&s("")}(e)},helpertext:"Search for a Python package",type:"search",boxprops:{mr:2},lefticon:Object(k.jsx)(T.a,{})})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:2,children:Object(k.jsx)(N.a,{variant:"contained",color:"primary",onClick:function(){return d()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(k.jsx)("b",{children:"Analyze"})})})]})]})},G=n(3),H=n(396),K=n(380),Q=n(419),J=function(e,t,n){var a={application_stack:{requirements:e,requirements_format:"pipenv",requirements_lock:t},runtime_environment:n};return q.a.post(I+"/advise/python",a,{params:{recommendation_type:"stable",limit:5e3},headers:{accept:"application/json","Content-Type":"application/json"}})},U=n(377),Y=n(367),Z=n(376),X=Object(Y.a)();function $(e){var t,n=e.suggestions,i=e.label,r=e.help,o=e.required,l=e.error,c=e.value,s=e.setValue;return n=Object(a.useMemo)((function(){return n.map((function(e){return{title:e}}))}),[n]),Object(k.jsx)(Z.a,{value:c,onChange:function(e,t){"string"===typeof t?s(t):t&&t.inputValue?s({title:t.inputValue}):s(t)},filterOptions:function(e,t){var n=X(e,t),a=t.inputValue,i=e.some((function(e){return a===e.title}));return""===a||i||n.push({inputValue:a,title:'Add "'.concat(a,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:null!==(t=n)&&void 0!==t?t:[],getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},renderOption:function(e,t){return Object(k.jsx)("li",Object(g.a)(Object(g.a)({},e),{},{children:t.title}))},freeSolo:!0,renderInput:function(e){return Object(k.jsx)(U.a,Object(g.a)(Object(g.a)({fullWidth:!0},e),{},{label:i,required:o,error:void 0!==l,helperText:r}))}})}function ee(e,t){var n;switch(t.type){case"loading":return Object(g.a)(Object(g.a)({},e),{},{loading:t.payload});case"error":return Object(g.a)(Object(g.a)({},e),{},{error:Object(g.a)(Object(g.a)({},e.error),{},Object(G.a)({},t.param,t.payload))});case"clear-error":return e.error={},e;case"input":return Object(g.a)(Object(g.a)({},e),{},(n={},Object(G.a)(n,t.param,t.payload),Object(G.a)(n,"error",Object(g.a)(Object(g.a)({},e.error),{},Object(G.a)({},t.param,void 0))),n));default:throw new Error("Advise state dispatch error")}}var te={error:{},loading:!1,lookupType:"id",operating_system_name:"ubi",operating_system_version:"8",platform:"",python_version:"3.8",cuda_version:"",cudnn_version:"",mkl_version:"",name:"",openblas_version:"",openmpi_version:"",base_image:""},ne=function(){var e,t,n,i,r,o,l,c,s,d,h,p,m,O,f,x,g,y,w,_=Object(u.g)(),E=Object(a.useReducer)(ee,te),A=Object(v.a)(E,2),P=A[0],M=A[1],B=function(){if("id"!==P.lookupType){var e=!0;return P.pipfile||(e=!1,M({type:"error",param:"pipfile",payload:"Field cant be empty"})),P.pipfileLock||(e=!1,M({type:"error",param:"pipfileLock",payload:"Field cant be empty"})),P.name||(e=!1,M({type:"error",param:"name",payload:"Field cant be empty"})),e}return!(!P.id||""===P.id)||(M({type:"error",param:"id",payload:"Field cant be empty"}),!1)},q=function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P.loading&&B()){e.next=2;break}return e.abrupt("return");case 2:"id"===P.lookupType?_("/advise/"+P.id):(M({type:"loading",payload:!0}),t={operating_system:{name:P.operating_system_name,version:P.operating_system_version},platform:P.platform,python_version:P.python_version,base_image:P.base_image,cuda_version:P.cuda_version,cudnn_version:P.cudnn_version,mkl_version:P.mkl_version,name:P.name,openblas_version:P.openblas_version,openmpi_version:P.openmpi_version},Object.keys(t).forEach((function(e){""===t[e]&&delete t[e]})),""!==t.operating_system.name&&""!==t.operating_system.version||delete t.operating_system,J(P.pipfile,P.pipfileLock,t).then((function(e){M({type:"loading",payload:!1}),_("/advise/"+e.data.analysis_id)})).catch((function(e){var t,n,a,i,r,o,l,c,s;if(M({type:"loading",payload:!1}),400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))if(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(a=n.data)||void 0===a||null===(i=a.error)||void 0===i?void 0:i.includes("Pipfile.lock"))M({type:"error",param:"pipfileLock",payload:null===e||void 0===e||null===(c=e.response)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.error});else if(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(o=r.data)||void 0===o||null===(l=o.error)||void 0===l?void 0:l.includes("Pipfile")){var d,u;M({type:"error",param:"pipfile",payload:null===e||void 0===e||null===(d=e.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.error})}})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(H.a,{in:"id"===P.lookupType,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(j.a,{container:!0,justifyContent:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:12,children:Object(k.jsx)(b.a,{color:"error",variant:"body1",sx:{minHeight:30},children:null===(e=P.error)||void 0===e?void 0:e.id})}),Object(k.jsxs)(j.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,xs:12,md:10,children:Object(k.jsx)(R,{error:null===(t=P.error)||void 0===t?void 0:t.id,onChange:function(e){return M({type:"input",param:"id",payload:e.target.value})},helpertext:"Analysis ID",type:"search",boxprops:{mr:2},lefticon:Object(k.jsx)(T.a,{})})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:2,children:Object(k.jsx)(N.a,{variant:"contained",color:"primary",onClick:function(){return q()},sx:{minHeight:"100%",minWidth:"100%"},children:Object(k.jsx)("b",{children:"Analyze"})})})]})]}),Object(k.jsx)(N.a,{onClick:function(){return M({type:"input",param:"lookupType",payload:"manual"})},children:"New Advise"})]})}),Object(k.jsx)(H.a,{in:"manual"===P.lookupType,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(b.a,{variant:"h6",mt:3,children:"Advise Parameters"}),Object(k.jsxs)(L.a,{sx:{backgroundColor:"white",padding:3,marginBottom:5},variant:"outlined",children:[Object(k.jsxs)(j.a,{container:!0,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(R,{label:(null===(n=P.error)||void 0===n?void 0:n.pipfile)?null===(i=P.error)||void 0===i?void 0:i.pipfile:"Pipfile contents",onChange:function(e){return M({type:"input",param:"pipfile",payload:e.target.value})},error:void 0!==(null===(r=P.error)||void 0===r?void 0:r.pipfile),multiline:!0,rows:8})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(R,{label:(null===(o=P.error)||void 0===o?void 0:o.pipfileLock)?null===(l=P.error)||void 0===l?void 0:l.pipfileLock:"Pipfile.lock contents",onChange:function(e){return M({type:"input",param:"pipfileLock",payload:e.target.value})},error:void 0!==(null===(c=P.error)||void 0===c?void 0:c.pipfileLock),multiline:!0,rows:8})})]}),Object(k.jsxs)(j.a,{container:!0,mt:4,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(K.a,{onChange:function(e){return M({type:"input",param:"base_image",payload:e.target.value})},value:P.base_image,sx:{minWidth:"100%"},label:"Base Image",required:!1,helperText:"A base container image used to run the application.",error:null===(s=P.error)||void 0===s?void 0:s.base_image})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)($,{setValue:function(e){var t;return M({type:"input",param:"cuda_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:P.cuda_version,suggestions:["9.0"],label:"CUDA Version",required:!1,help:"Nvidia CUDA version which the application uses.",error:null===(d=P.error)||void 0===d?void 0:d.cuda_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)($,{setValue:function(e){var t;return M({type:"input",param:"cudnn_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:P.cudnn_version,suggestions:["8"],label:"cuDNN Version",required:!1,help:"NVIDIA cuDNN version used, if any.",error:null===(h=P.error)||void 0===h?void 0:h.cudnn_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)($,{setValue:function(e){var t;return M({type:"input",param:"mkl_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:P.mkl_version,suggestions:["2021.1.1"],label:"MKL Version",required:!1,help:"Intel\xae Math Kernel Library version used, if any.",error:null===(p=P.error)||void 0===p?void 0:p.mkl_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)($,{setValue:function(e){var t;return M({type:"input",param:"name",payload:null!==(t=e.title)&&void 0!==t?t:""})},value:P.name,suggestions:["ubi:8-prod"],label:"Name",required:!0,help:"User defined name of the runtime environment.",error:null===(m=P.error)||void 0===m?void 0:m.name})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)($,{setValue:function(e){var t;return M({type:"input",param:"openblas_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:P.openblas_version,suggestions:["0.3.13"],label:"OpenBLAS Version",required:!1,help:"OpenBLAS version used, if any.",error:null===(O=P.error)||void 0===O?void 0:O.openblas_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)($,{setValue:function(e){var t;return M({type:"input",param:"openmpi_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:P.openmpi_version,suggestions:["4.1"],label:"Open MPI Version",required:!1,help:"Open MPI version used, if any.",error:null===(f=P.error)||void 0===f?void 0:f.openmpi_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(K.a,{onChange:function(e){return M({type:"input",param:"operating_system_name",payload:e.target.value})},value:P.operating_system_name,sx:{minWidth:"100%"},label:"Operating System Name",required:!1,helperText:"Operating system name used.",error:null===(x=P.error)||void 0===x?void 0:x.operating_system_name})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)(K.a,{onChange:function(e){return M({type:"input",param:"operating_system_version",payload:e.target.value})},value:P.operating_system_version,sx:{minWidth:"100%"},label:"Operating System Version",required:!1,helperText:"Operating system version used.",error:null===(g=P.error)||void 0===g?void 0:g.operating_system_version})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)($,{setValue:function(e){var t;return M({type:"input",param:"platform",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:P.platform,suggestions:["linux-x86_64"],label:"Platform",required:!1,help:"Platform used - corresponds to sysconfig.get_platform() call.",error:null===(y=P.error)||void 0===y?void 0:y.platform})}),Object(k.jsx)(j.a,{item:!0,xs:12,sm:6,md:4,children:Object(k.jsx)($,{setValue:function(e){var t;return M({type:"input",param:"python_version",payload:null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:""})},value:P.python_version,suggestions:["2.7","3.6","3.7","3.8","3.9"],label:"Python Version",required:!1,help:"Python version on which the application runs on.",error:null===(w=P.error)||void 0===w?void 0:w.python_version})}),Object(k.jsxs)(j.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,xs:6,md:6,children:Object(k.jsx)(N.a,{variant:"outlined",color:"primary",onClick:function(){return M({type:"input",param:"lookupType",payload:"id"})},sx:{minHeight:"100%",minWidth:"100%"},children:Object(k.jsx)("b",{children:"Cancel"})})}),Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsx)(Q.a,{variant:"contained",color:"primary",onClick:function(){return q()},loading:P.loading,sx:{minHeight:"100%",minWidth:"100%"},children:Object(k.jsx)("b",{children:"Analyze"})})})]})]})]})]})})]})},ae=function(){var e=Object(a.useState)("multiple"),t=Object(v.a)(e,2),n=t[0],i=t[1],r=Object(f.a)(),o=Object(x.a)(r.breakpoints.up("sm"));return Object(k.jsx)("div",{style:{maxWidth:"1000px",marginLeft:"auto",marginRight:"auto"},children:Object(k.jsxs)(j.a,{container:!0,justifyContent:"center",children:[Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(h.a,{sx:{marginTop:10},children:Object(k.jsx)("img",{alt:"Thoth Logo",src:E,height:o?300:"auto",width:"100%"})})}),Object(k.jsxs)(j.a,{container:!0,item:!0,justifyContent:"center",mt:5,spacing:0,children:[Object(k.jsxs)(j.a,{container:!0,item:!0,sm:12,md:6,align:"center",mr:5,children:[Object(k.jsx)(j.a,{item:!0,xs:12,align:"left",mb:3,children:Object(k.jsx)(b.a,{variant:"h4",children:Object(k.jsx)("b",{children:"Thoth Search"})})}),Object(k.jsx)(j.a,{item:!0,xs:12,align:"left",children:Object(k.jsx)(b.a,{variant:"subtitle1",children:"Thoth Search is a tool that runs analysis on a Python application. It utilizes package metadata and Thoth Adviser to analyse and recommend a software stack. You can run analysis on an entire Python application using a properly formatted Pipfile and Pipfile.lock. Alternatively, you can analyse a single Python package to see what Thoth knows about the package."})})]}),Object(k.jsx)(j.a,{item:!0,container:!0,sm:12,md:5,direction:"column",justifyContent:"center",spacing:1,children:[["One","100k"],["Two","20%"],["Three","62"],["Four","N/A"]].map((function(e,t){return Object(k.jsxs)(j.a,{item:!0,container:!0,alignItems:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsx)(b.a,{variant:"h6",children:Object(k.jsxs)("b",{children:["Thoth Statistic ",e[0]]})})}),Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsx)(b.a,{variant:"h5",align:"right",children:e[1]})})]},t)}))}),Object(k.jsx)(j.a,{item:!0,xs:12,align:"center",mt:3,mb:4,children:Object(k.jsxs)(p.a,{value:n,exclusive:!0,onChange:function(e,t){t&&i(t)},size:o?"large":"small",children:[Object(k.jsx)(m.a,{value:"single",children:Object(k.jsx)("b",{children:"single package analysis"})}),Object(k.jsx)(m.a,{value:"multiple",children:Object(k.jsx)("b",{children:"Python application analysis"})})]})}),Object(k.jsxs)(j.a,{item:!0,xs:12,children:[Object(k.jsx)(O.a,{sx:{marginBottom:3}}),Object(k.jsx)(_,{value:n,index:"single",children:Object(k.jsx)(F,{})}),Object(k.jsx)(_,{value:n,index:"multiple",children:Object(k.jsx)(ne,{})})]})]})]})})},ie=function(){return Object(k.jsx)("div",{children:"404"})},re=n(378),oe=function(){return Object(k.jsx)(h.a,{pb:3,pt:6,sx:{backgroundColor:"#444f60",textAlign:"center",color:"white"},children:"This is a footer"})},le=Object(re.a)((function(e){return{root:{marginLeft:"auto",marginRight:"auto",paddingRight:e.spacing(3),paddingLeft:e.spacing(3),marginTop:e.spacing(4),marginBottom:e.spacing(15),minHeight:"100vh"}}})),ce=function(e){var t=e.children,n=le();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:n.root,children:t}),Object(k.jsx)(oe,{})]})},se=n(382),de=n(402),ue=function(e){var t=e.children,n=e.header,a=Object(u.f)();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{children:[n,Object(k.jsxs)(se.a,{value:a.pathname.split("/").at(-1),indicatorColor:"primary",textColor:"primary",children:[Object(k.jsx)(de.a,{label:"Summary",value:"summary",component:d.b,to:"summary"}),Object(k.jsx)(de.a,{label:"Advise Results",value:"details",component:d.b,to:"details"})]})]}),Object(k.jsx)("div",{children:t})]})},ve=n(403),je=n(404),he=n(405),be=Object(re.a)({root:{minWidth:275,height:"100%"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),pe=function(e){var t=e.cardMeta,n=e.cardBody,a=e.cardAction,i=be();return Object(k.jsxs)(ve.a,{className:i.root,children:[Object(k.jsx)(je.a,{action:a,title:Object(k.jsx)(b.a,{variant:"h5",children:t.title}),subheader:t.subTitle}),Object(k.jsx)(he.a,{children:n})]})},me=n(390),Oe=n(193),fe=n.n(Oe),xe=n(194),ge=n.n(xe),ye=["text","icon","link"],ke=Object(re.a)((function(){return{root:{display:"flex",alignItems:"center"}}})),we=function(e){var t=e.text,n=e.icon,a=e.link,i=Object(y.a)(e,ye),r=ke();return Object(k.jsxs)("div",{className:"".concat(r.root," ").concat(i.className),children:[n,Object(k.jsx)(b.a,{href:a||null,variant:"body2",marginLeft:!0,children:t})]})};function _e(e){return Object.entries(e.default).map((function(e){var t=Object(v.a)(e,2);return{name:t[0],version:t[1].version.replace("==","")}}))}function Ee(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1){var a=Math.floor(n);return a+" year"+(1!==a?"s":"")}if((n=t/2592e3)>1){var i=Math.floor(n);return i+" month"+(1!==i?"s":"")}if((n=t/86400)>1){var r=Math.floor(n);return r+" day"+(1!==r?"s":"")}if((n=t/3600)>1){var o=Math.floor(n);return o+" hour"+(1!==o?"s":"")}if((n=t/60)>1){var l=Math.floor(n);return l+" minute"+(1!==l?"s":"")}var c=Math.floor(t);return c+" second"+(1!==c?"s":"")}var Ae=n(20),Ce=function(e,t){if(e&&t){var n=new Map;t.forEach((function(e){e.package_name&&(n.has(e.package_name)?n.set(e.package_name,[].concat(Object(Ae.a)(n.get(e.package_name)),[e])):n.set(e.package_name,[e]))})),e.forEach((function(t){var a={package:t.key};if("removed"===t.value.change?(a.header="".concat(t.value.label," was ").concat(0===t.value.depth?"directly":"indirectly"," removed by Thoth resolver."),a.reasons=function(e,t){var n=new Map,a=[];a.push(e);for(var i=[],r=function(){var r=a.pop();r&&!n.has(r)&&(n.set(r),"version"===r.value.change?i.push(r):r.parents.forEach((function(n){"*App"===n&&r.key!==e.key&&i.push(r),a.push(t.get(n))})))};0!==a.length;)r();return i.map((function(t){var n="version"===t.value.change?" had its version changed to "+t.value.version+" from "+t.value.oldVersion+". Version "+t.value.oldVersion+" of "+t.key+" included package "+e.value.label+" as a dependency, where version "+t.value.version+" does not. ":" did not have any dependents and was removed by the Thoth resolver.";return{package:t.key,reason:n}}))}(t,e),0===a.reasons.length&&(a.header="".concat(t.value.label," was removed for an unknown reason. The package does not have dependents in the Pipfile.lock."))):"added"===t.value.change?a.header="".concat(t.value.label," was added to the Pipfile.lock by Thoth resolver."):"version"===t.value.change?a.header="".concat(t.key," had its version changed from ").concat(t.value.oldVersion," to ").concat(t.value.version,"."):a.header="Thoth resolver did not remove or change package "+t.value.label+".",n.has(t.key)){var i=n.get(t.key);a=Object(g.a)(Object(g.a)({},a),{},{thoth:i})}t.value.justifications=a}),[])}},Se=n(383),Ne=["info"],Le=function(e){var t=e.info,n=Object(y.a)(e,Ne);return Object(k.jsx)(Se.a,{className:null===n||void 0===n?void 0:n.className,action:Object(k.jsx)(N.a,{color:"inherit",size:"small",href:null===t||void 0===t?void 0:t.link,children:"DETAILS"}),severity:t.type.toLowerCase(),children:null===t||void 0===t?void 0:t.message})},Pe=Object(re.a)((function(e){return{titleRow:{display:"flex",alignItems:"center",marginBottom:e.spacing(1)},marginLeft:{marginLeft:e.spacing(2)},marginRight:{marginRight:e.spacing(2)},linksRow:{display:"flex",marginBottom:e.spacing(3),alignItems:"center"},alert:{width:"100%",marginTop:e.spacing(1)}}})),Re=function(e){var t,n,r,o,l,c,s,d,u,j,h,p,m,O,f,x=e.adviseDocument,g=e.logs,y=Pe(),w=i.a.useState(!1),_=Object(v.a)(w,2),E=_[0],A=_[1],C=i.a.useState(!1),S=Object(v.a)(C,2),L=S[0],P=S[1],R=i.a.useState(),M=Object(v.a)(R,2),T=M[0],B=M[1],q=Object(a.useMemo)((function(){var e,t,n;return(null===x||void 0===x||null===(e=x.result)||void 0===e?void 0:e.report)?x.result.report.ERROR?["ERROR","error"]:["COMPLETE","success"]:(null===x||void 0===x||null===(t=x.result)||void 0===t?void 0:t.error)?["ERROR","error"]:(null===x||void 0===x||null===(n=x.status)||void 0===n?void 0:n.state)?[x.status.state.toUpperCase(),"info"]:["UNKNOWN",void 0]}),[x]),I=Object(v.a)(q,2),V=I[0],D=I[1],W=Object(a.useMemo)((function(){var e,t,n,a;if(null===x||void 0===x||null===(e=x.result)||void 0===e?void 0:e.report)return(null===x||void 0===x||null===(t=x.result)||void 0===t||null===(n=t.report)||void 0===n?void 0:n.stack_info)?null===x||void 0===x||null===(a=x.result)||void 0===a?void 0:a.report.stack_info.filter((function(e){return"ERROR"===e.type})):null}),[x]);return Object(k.jsxs)("div",{children:[Object(k.jsx)(b.a,{variant:"h4",children:Object(k.jsx)("b",{children:null!==(t=null===x||void 0===x||null===(n=x.metadata)||void 0===n?void 0:n.document_id)&&void 0!==t?t:null===x||void 0===x||null===(r=x.parameters)||void 0===r?void 0:r.analysis_id})}),Object(k.jsxs)("div",{className:y.linksRow,children:[Object(k.jsx)(me.a,{label:V,color:D}),Object(k.jsx)(we,{className:y.marginLeft,text:(m=null===x||void 0===x||null===(o=x.status)||void 0===o?void 0:o.finished_at,O=null===x||void 0===x||null===(l=x.status)||void 0===l?void 0:l.started_at,f=null===x||void 0===x||null===(c=x.metadata)||void 0===c?void 0:c.datetime,m?"Advise finished "+Ee(new Date(m))+" ago.":O?"Advise started "+Ee(new Date(O))+" ago.":f?"Advise finished "+Ee(new Date(f+"Z"))+" ago.":"Time started/finished not available"),icon:Object(k.jsx)(fe.a,{})}),Object(k.jsx)(N.a,{sx:{marginLeft:2},onClick:function(){return P(!L)},children:Object(k.jsx)(we,{text:"Logs",icon:Object(k.jsx)(ge.a,{})})})]}),Object(k.jsx)(b.a,{variant:"subtitle2",children:null!==(s=null!==(d=null===x||void 0===x||null===(u=x.result)||void 0===u||null===(j=u.report)||void 0===j?void 0:j.ERROR)&&void 0!==d?d:null===x||void 0===x?void 0:x.error)&&void 0!==s?s:null===x||void 0===x||null===(h=x.result)||void 0===h?void 0:h.error_msg}),(null===W||void 0===W?void 0:W.length)>0?Object(k.jsxs)("div",{children:[Object(k.jsx)(Le,{info:W[0]}),Object(k.jsx)(H.a,{in:E,timeout:"auto",unmountOnExit:!0,children:null===W||void 0===W?void 0:W.slice(1).map((function(e,t){return Object(k.jsx)(Le,{info:e,className:y.alert},t)}))}),Object(k.jsx)(N.a,{color:"inherit",size:"small",onClick:function(){return A(!E)},children:(null===W||void 0===W?void 0:W.length)>1?E?"LESS":"MORE":null})]}):null,Object(k.jsx)(H.a,{in:L,children:null!==(p=null===g||void 0===g?void 0:g.split("\n").map((function(e,t){return Object(k.jsx)(b.a,{noWrap:T!==t,onClick:function(){return B(T===t?void 0:t)},variant:"body2",sx:{backgroundColor:T===t?"lightyellow":t%2===0?"lightgray":"unset"},children:e},t)})))&&void 0!==p?p:"Advisor log is not available."}),"COMPLETE"===V?Object(k.jsxs)(b.a,{variant:"body1",sx:{color:"text.secondary"},children:["Thoth has added and removed packages from the original Pipfile.lock, resulting in a ",Object(k.jsx)("i",{children:"new"})," Pipfile.lock. Switch between the new and old Python environments to see the differences."]}):null]})},Me=n(391),Te=n(417),Be=n(407),qe=Object(Te.a)((function(e){return{root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:e.palette.grey["light"===e.palette.type?200:700]},bar:{borderRadius:5,backgroundColor:"#1a90ff"}}}))(Be.a),Ie=Object(re.a)((function(e){return{root:{display:"grid",gridTemplateColumns:"repeat(6,1fr)",alignItems:"center",gridGap:e.spacing(1)},label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{textAlign:"end"}}})),Ve=function(e){var t=e.value,n=e.total,a=e.label,i=e.action,r=Ie();return Object(k.jsxs)(j.a,{container:!0,spacing:1,alignItems:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:5,children:Object(k.jsx)(b.a,{variant:"body2",className:r.label,children:a})}),Object(k.jsx)(j.a,{item:!0,xs:1.75,children:Object(k.jsx)(b.a,{className:r.value,variant:"body2",children:t})}),Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(qe,{variant:"determinate",value:n>0?t/n*100:0})}),Object(k.jsx)(j.a,{item:!0,xs:1,children:Object(k.jsx)("div",{children:null!==i&&void 0!==i?i:null})})]})},De=function(e){var t,n,a,i,r,o=e.metric,l=(null===o||void 0===o?void 0:o.added)+(null===o||void 0===o?void 0:o.removed)+(null===o||void 0===o?void 0:o.version)+(null===o||void 0===o?void 0:o.unchanged),c=Object.values(null!==(t=null===o||void 0===o?void 0:o.justification)&&void 0!==t?t:{}).reduce((function(e,t){return e+t}),0);return o?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(b.a,{variant:"body2",gutterBottom:!0,children:null===o||void 0===o?void 0:o.build}),Object(k.jsx)(b.a,{variant:"h6",gutterBottom:!0,mt:2,children:"What Thoth Changed"}),Object(k.jsx)(O.a,{mb:1}),Object(k.jsx)(Ve,{value:null!==(n=null===o||void 0===o?void 0:o.added)&&void 0!==n?n:0,total:l,label:"Added Packages",mb:1}),Object(k.jsx)(Ve,{value:null!==(a=null===o||void 0===o?void 0:o.removed)&&void 0!==a?a:0,total:l,label:"Removed Packages",mb:1}),Object(k.jsx)(Ve,{value:null!==(i=null===o||void 0===o?void 0:o.version)&&void 0!==i?i:0,total:l,label:"Version Changes"}),Object(k.jsx)(b.a,{variant:"h6",mt:3,gutterBottom:!0,children:"Justification Counts"}),Object(k.jsx)(O.a,{mb:1}),Object.entries(null!==(r=null===o||void 0===o?void 0:o.justification)&&void 0!==r?r:{}).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(k.jsx)(Ve,{value:a,total:c,label:n,mb:1},n)}))]}):Object(k.jsxs)(h.a,{children:[Object(k.jsx)(Me.a,{}),Object(k.jsx)(Me.a,{}),Object(k.jsx)(Me.a,{width:"60%"})]})},We=function(e){var t=e.value,n=e.onChange;return Object(k.jsxs)(p.a,{value:t,exclusive:!0,size:"small",onChange:n,children:[Object(k.jsx)(m.a,{value:"oldGraph",children:"Old"}),Object(k.jsx)(m.a,{value:"newGraph",children:"New"})]})},ze=n(415),Fe=n(399),Ge=n(385),He=n(373),Ke=function(e){var t,n,a,i,r,o,l,c=e.all,s=e.roots,d=(null!==(t=null===c||void 0===c?void 0:c.direct)&&void 0!==t?t:0)+(null!==(n=null===c||void 0===c?void 0:c.indirect)&&void 0!==n?n:0)+(null!==(a=null===c||void 0===c?void 0:c.roots)&&void 0!==a?a:0);return c&&s?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(b.a,{variant:"h6",gutterBottom:!0,children:"All Packages"}),Object(k.jsx)(O.a,{mb:1}),Object(k.jsx)(Ve,{value:null!==(i=null===c||void 0===c?void 0:c.roots)&&void 0!==i?i:0,total:d,label:"Root",mb:1}),Object(k.jsx)(Ve,{value:null!==(r=null===c||void 0===c?void 0:c.direct)&&void 0!==r?r:0,total:d,label:"Direct",mb:1}),Object(k.jsx)(Ve,{value:null!==(o=null===c||void 0===c?void 0:c.indirect)&&void 0!==o?o:0,total:d,label:"Indirect"}),Object(k.jsx)(b.a,{variant:"h6",gutterBottom:!0,mt:2,children:"Root Packages"}),Object(k.jsx)(O.a,{mb:1}),Object(k.jsx)(Fe.a,{component:"nav",children:Object(k.jsx)(ze.a,{children:null===(l=Object.entries(null!==s&&void 0!==s?s:{}))||void 0===l?void 0:l.map((function(e){var t,n,a,i,r,o,l=Object(v.a)(e,1)[0],c=(null!==(t=s[l].direct)&&void 0!==t?t:0)+(null!==(n=s[l].indirect)&&void 0!==n?n:0);return Object(k.jsx)(H.a,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(Ge.a,{children:Object(k.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(He.a,{primary:l})}),Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsxs)(j.a,{container:!0,direction:"column",children:[Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(Ve,{value:null!==(a=null===s||void 0===s||null===(i=s[l])||void 0===i?void 0:i.direct)&&void 0!==a?a:0,total:c,label:"Direct"})}),Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(Ve,{value:null!==(r=null===s||void 0===s||null===(o=s[l])||void 0===o?void 0:o.indirect)&&void 0!==r?r:0,total:c,label:"Indirect"})})]})})]})}),Object(k.jsx)(O.a,{variant:"middle",mb:1})]})},l)}))})})]}):Object(k.jsxs)(h.a,{children:[Object(k.jsx)(Me.a,{}),Object(k.jsx)(Me.a,{}),Object(k.jsx)(Me.a,{width:"60%"})]})},Qe=n(197),Je=n.n(Qe),Ue=n(198),Ye=n.n(Ue),Ze=n(196),Xe=n.n(Ze),$e=n(195),et=n.n($e),tt=function(e){var t,n=e.name,a=e.metadata,r=e.packages,o=e.totalLicenses,l=i.a.useState(!1),c=Object(v.a)(l,2),s=c[0],d=c[1];return Object(k.jsxs)(j.a,{container:!0,children:[Object(k.jsx)(j.a,{item:!0,xs:1,children:null===(null===a||void 0===a?void 0:a.isOsiApproved)?Object(k.jsx)(et.a,{}):(null===a||void 0===a?void 0:a.isOsiApproved)?Object(k.jsx)(Xe.a,{}):null}),Object(k.jsxs)(j.a,{item:!0,xs:!0,children:[Object(k.jsx)(h.a,{onClick:function(){return d(!s)},children:Object(k.jsx)(Ve,{value:null!==(t=Object.keys(r).length)&&void 0!==t?t:0,total:o,label:n,action:s?Object(k.jsx)(Je.a,{}):Object(k.jsx)(Ye.a,{})},n)}),Object(k.jsxs)(H.a,{in:s,timeout:"auto",unmountOnExit:!0,children:[Object(k.jsx)(h.a,{my:1,children:Object.entries(r).sort((function(e,t){return e[1]-t[1]})).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(k.jsx)(me.a,{sx:{margin:.5},color:0===a.depth?"primary":1===a.depth?"secondary":"default",label:n},n)}))}),Object(k.jsx)(O.a,{})]})]})]})},nt=function(e){var t=e.metric,n=i.a.useState(!1),r=Object(v.a)(n,2),o=r[0],l=r[1],c=Object(a.useMemo)((function(){return Object.entries(null!==t&&void 0!==t?t:{}).sort((function(e,t){return Object.keys(t[1]).length-Object.keys(e[1]).length}))}),[t]),s=Object(a.useMemo)((function(){return Object.entries(null!==t&&void 0!==t?t:{}).reduce((function(e,t){var n=Object(v.a)(t,2)[1];return e+Object.keys(n.packages).length}),0)}),[t]);return t?Object(k.jsxs)("div",{children:[Object(k.jsxs)(j.a,{container:!0,children:[Object(k.jsx)(j.a,{item:!0,xs:1,children:Object(k.jsx)(b.a,{variant:"h6",gutterBottom:!0,children:"OSI"})}),Object(k.jsx)(j.a,{item:!0,xs:!0,children:Object(k.jsx)(b.a,{variant:"h6",gutterBottom:!0,children:"Dependency Licenses"})})]}),Object(k.jsx)(O.a,{}),Object(k.jsx)(ze.a,{children:null===c||void 0===c?void 0:c.slice(0,10).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(k.jsx)(H.a,{children:Object(k.jsx)(tt,{name:n,metadata:a.metadata,packages:a.packages,totalLicenses:s})},n)}))}),Object(k.jsx)(H.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(k.jsx)(ze.a,{children:c.slice(10).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(k.jsx)(H.a,{children:Object(k.jsx)(tt,{name:n,metadata:a.metadata,packages:a.packages,totalLicenses:s})},n)}))})}),Object(k.jsx)(h.a,{textAlign:"center",children:Object(k.jsx)(N.a,{onClick:function(){return l(!o)},color:"primary",children:o?"Less":"More"})})]}):Object(k.jsxs)(h.a,{children:[Object(k.jsx)(Me.a,{}),Object(k.jsx)(Me.a,{}),Object(k.jsx)(Me.a,{width:"60%"})]})},at=n(412),it=n(413),rt=n(414),ot=n(409),lt=n(410),ct=n(381),st=n(200),dt=n.n(st),ut=n(199),vt=n.n(ut),jt=n(201),ht=n.n(jt);function bt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function pt(e,t){return"desc"===e?function(e,n){return bt(e,n,t)}:function(e,n){return-bt(e,n,t)}}function mt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var Ot=n(408),ft=n(392),xt=n(374),gt=[{id:"name",numeric:!1,label:"Package"},{id:"depth",numeric:!0,label:"Depth"},{id:"license",numeric:!1,label:"License"},{id:"dependencies",numeric:!0,label:"Direct Dependencies"}];var yt=function(e){var t=e.order,n=e.orderBy,a=e.onRequestSort;return Object(k.jsx)(Ot.a,{children:Object(k.jsx)(ot.a,{children:gt.map((function(e){return Object(k.jsx)(lt.a,{align:e.numeric?"right":"left",padding:"normal",sortDirection:n===e.id&&t,children:Object(k.jsxs)(ft.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(i=e.id,function(e){a(e,i)}),children:[e.label,n===e.id?Object(k.jsx)(h.a,{component:"span",sx:xt.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))})})},kt=n(411),wt=n(98),_t=n.n(wt),Et=n(140),At=n(135),Ct=n.n(At),St=n(81),Nt=n(82),Lt=function(){function e(t,n){Object(St.a)(this,e),this.adjacents=new Set,this.key=t,this.value=n}return Object(Nt.a)(e,[{key:"addAdjacent",value:function(e){this.adjacents.add(e)}},{key:"isAdjacent",value:function(e){return this.adjacents.has(e)}},{key:"getAdjacents",value:function(){return Array.from(this.adjacents)}}]),e}(),Pt=function(e){var t,n,a,i,r,o,l,c,s,d,u=e.node;return Object(k.jsxs)("div",{children:[Object(k.jsxs)(j.a,{container:!0,alignItems:"center",children:[Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsx)(b.a,{variant:"h6",children:Object(k.jsx)("b",{children:u.value.id})})}),Object(k.jsx)(j.a,{item:!0,xs:6,children:Object(k.jsxs)(b.a,{ml:2,variant:"body1",children:["v",null!==(t=u.value.version)&&void 0!==t?t:"NaN"]})})]}),Object(k.jsx)(b.a,{gutterBottom:!0,variant:"body2",children:null!==(n=null===(a=u.value)||void 0===a||null===(i=a.metadata)||void 0===i?void 0:i.summary)&&void 0!==n?n:"NaN"}),Object(k.jsxs)(j.a,{container:!0,spacing:2,children:[Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(we,{text:null!==(r=null===(o=u.value)||void 0===o||null===(l=o.metadata)||void 0===l?void 0:l.license)&&void 0!==r?r:"NaN",icon:Object(k.jsx)(_t.a,{})})}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(we,{ml:2,text:(null===(c=u.value)||void 0===c?void 0:c.latestVersion)?"Latest version is installed":"Installed version is NOT the latest.",icon:Object(k.jsx)(Ct.a,{})})})]}),Object(k.jsx)(b.a,{variant:"body2",mt:2,children:null===(s=u.value)||void 0===s||null===(d=s.justifications)||void 0===d?void 0:d.header})]})},Rt=n(133),Mt=function(){function e(){Object(St.a)(this,e),this.nodes=new Map}return Object(Nt.a)(e,[{key:"addVertex",value:function(e,t){if(this.nodes.has(e))return this.nodes.get(e);var n=new Lt(e,t);return this.nodes.set(e,n),n}},{key:"addEdge",value:function(e,t){var n=this.nodes.get(e),a=this.nodes.get(t);return n.addAdjacent(a),[n,a]}},{key:"areAdjacents",value:function(e,t){var n=this.nodes.get(e),a=this.nodes.get(t);return!(!n||!a)&&n.isAdjacent(a)}},{key:"graphSearch",value:C.a.mark((function e(t){var n,a,i,r,o=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:"bfs",a=new Map,(i=[]).push(t);case 4:if(0===i.length){e.next=13;break}if(!(r="dfs"===n?i.pop():i.shift())||a.has(r)){e.next=11;break}return e.next=9,r;case 9:a.set(r),r.getAdjacents().forEach((function(e){return i.push(e)}));case 11:e.next=4;break;case 13:case"end":return e.stop()}}),e)}))},{key:"findPath",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,a=this.nodes.get(e),i=this.nodes.get(t),r=new Map(n);if(!i||!a)return[];if(r.set(a),e===t)return Array.from(r.keys());var o,l=Object(Rt.a)(a.getAdjacents());try{for(l.s();!(o=l.n()).done;){var c=o.value;if(!r.has(c)){var s=this.findPath(c.value,t,r);if(s.length)return s}}}catch(d){l.e(d)}finally{l.f()}return[]}},{key:"findAllNodesOnAllPaths",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=[];for(i.push(e);0!==i.length;){var r=i.pop();r.key!==t&&(r&&!a.has(r.key)&&(a.set(r.key,r),r.parents.forEach((function(e){return i.push(n.nodes.get(e))}))))}return a}},{key:"findAllPaths",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=this.nodes.get(e),r=this.nodes.get(t),o=new Map(a);if(!r||!i)return[];if(o.set(i),e===t)return[Array.from(o.keys())];var l=[];return i.getAdjacents().forEach((function(e){o.has(e)||n.findAllPaths(e.value.id,t,o).forEach((function(e){l.push(e)}))})),l}}]),e}(),Tt=["mergedGraph"],Bt=Object(re.a)((function(){return{root:{display:"flex",flexFlow:"column nowrap"},canvas:{flex:"1 1 auto",height:"50vh"}}})),qt=function(e){var t=e.mergedGraph,n=Object(y.a)(e,Tt),i=Bt(),r=Object(a.useRef)(null),l=Object(a.useContext)(Vt).selected;return Object(a.useEffect)((function(){if(l&&t){var e=t.nodes.get(l),n=t.findAllNodesOnAllPaths(e,"*App");n.set("*App",t.nodes.get("*App"));var a=new Et.a;n.forEach((function(t){var n,i=document.createElement("div");o.a.render(Object(k.jsx)(Pt,{node:t}),i);var r=null!==(n=t.value.color)&&void 0!==n?n:V.nodes.color,l=void 0;"*App"===t.key?(r="#4fc1ea",l={color:"#4fc1ea",strokeWidth:3,size:20}):t.key===e.key&&(r="#f39200"),a.add(Object(g.a)(Object(g.a)({},t.value),{},{color:r,title:t.key===e.key||"*App"===t.key?void 0:i,font:l}))}));var i={nodes:a,edges:new Et.a(t.visEdges)},c=r.current&&new Et.b(r.current,i,V),s=document.getElementById("mynetwork").getElementsByTagName("canvas")[0];c.on("hoverNode",(function(){d("grab")})),c.on("blurNode",(function(){d("default")})),c.on("dragStart",(function(){d("grabbing")})),c.on("dragging",(function(){d("grabbing")})),c.on("dragEnd",(function(){d("grab")})),c.on("dragEnd",(function(e){0===e.nodes.length||c.isCluster(e.nodes[0])||c.editNode(e.nodes[0])})),c.on("dragEnd",(function(e){0===e.nodes.length||c.isCluster(e.nodes[0])||c.editNode(e.nodes[0])}))}function d(e){s.style.cursor=e}}),[l,t]),Object(k.jsx)("div",{className:"".concat(i.root," ").concat(n.className),children:Object(k.jsx)("div",{ref:r,id:"mynetwork",className:i.canvas})})},It=function(e){var t,n,r,o,l,c,s,d,u,p,m,O,f,x,g,y,w,_,E,A,C,S,P,R,M,T=e.mergedGraph,B=Object(a.useContext)(Vt),q=B.selected,I=B.setSelected,V=T.nodes.get(q),D={removed:[],added:[],version:[],unchanged:[]};Object(Ae.a)(null!==(t=null===V||void 0===V?void 0:V.parents)&&void 0!==t?t:[]).filter((function(e){return"*App"!==e})).forEach((function(e){D[T.nodes.get(e).value.change].push(e)}));var W=Object(a.useMemo)((function(){var e,t,n,a={};return null===V||void 0===V||null===(e=V.value)||void 0===e||null===(t=e.justifications)||void 0===t||null===(n=t.thoth)||void 0===n||n.forEach((function(e){var t;a[e.type]=[].concat(Object(Ae.a)(null!==(t=a[e.type])&&void 0!==t?t:[]),[e])})),a}),[V]);return Object(k.jsxs)(h.a,{children:[Object(k.jsxs)(L.a,{sx:{padding:2},children:[Object(k.jsxs)(j.a,{container:!0,alignItems:"center",mb:1,children:[Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(b.a,{variant:"h3",children:Object(k.jsx)("b",{children:null===V||void 0===V||null===(n=V.value)||void 0===n||null===(r=n.metadata)||void 0===r?void 0:r.name})})}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsxs)(b.a,{ml:2,variant:"h6",children:["v",null!==(o=null===V||void 0===V||null===(l=V.value)||void 0===l||null===(c=l.metadata)||void 0===c?void 0:c.version)&&void 0!==o?o:"NaN"]})})]}),Object(k.jsx)(b.a,{gutterBottom:!0,variant:"body1",children:null!==(s=null===V||void 0===V||null===(d=V.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.summary)&&void 0!==s?s:"NaN"}),Object(k.jsx)(j.a,{container:!0,spacing:2,children:Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(we,{text:null!==(p=null===V||void 0===V||null===(m=V.value)||void 0===m||null===(O=m.metadata)||void 0===O?void 0:O.license)&&void 0!==p?p:"NaN",icon:Object(k.jsx)(_t.a,{})})})})]}),Object(k.jsxs)(L.a,{sx:{padding:2,marginTop:2},children:[Object(k.jsx)(b.a,{variant:"h5",children:"Thoth Justifications"}),Object(k.jsx)(b.a,{variant:"body1",mt:2,children:null===V||void 0===V||null===(f=V.value)||void 0===f||null===(x=f.justifications)||void 0===x?void 0:x.header}),(null===V||void 0===V||null===(g=V.value)||void 0===g||null===(y=g.justifications)||void 0===y||null===(w=y.reasons)||void 0===w?void 0:w.length)?Object(k.jsx)("ul",{children:null===V||void 0===V||null===(_=V.value)||void 0===_||null===(E=_.justifications)||void 0===E?void 0:E.reasons.map((function(e,t){return Object(k.jsx)("li",{children:Object(k.jsxs)(b.a,{variant:"body1",mt:2,children:[Object(k.jsx)(kt.a,{underline:"hover",onClick:function(){return I(e.package)},children:e.package}),e.reason]})},t+e.reason)}))}):null,Object.entries(W).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(k.jsxs)(i.a.Fragment,{children:[Object(k.jsxs)(b.a,{variant:"h6",mt:2,children:[n," Justifications"]}),a.map((function(e,t){return Object(k.jsxs)(j.a,{container:!0,alignItems:"center",ml:3,children:[Object(k.jsxs)(j.a,{item:!0,xs:10,children:[Object(k.jsx)(b.a,{variant:"body1",mt:1,children:e.message}),Object(k.jsx)(b.a,{variant:"body2",ml:3,mt:.5,children:e.advisory})]}),Object(k.jsx)(j.a,{item:!0,children:Object(k.jsx)(N.a,{href:e.link,children:"READ MORE"})})]},e.message+t)}))]},n)}))]}),Object(k.jsxs)(L.a,{sx:{padding:2,marginTop:2},children:[Object(k.jsx)(b.a,{variant:"h5",mb:2,children:"Package Origins"}),Object(k.jsxs)(b.a,{variant:"body1",mb:2,children:[0===(null===(A=Object(Ae.a)(null!==(C=null===V||void 0===V?void 0:V.parents)&&void 0!==C?C:[]).filter((function(e){return"*App"!==e})))||void 0===A?void 0:A.length)?(null===V||void 0===V||null===(S=V.value)||void 0===S?void 0:S.label)+" is not a dependent of any package in this Python environment":"There are "+(null===(P=Object(Ae.a)(null!==(R=null===V||void 0===V?void 0:V.parents)&&void 0!==R?R:[]).filter((function(e){return"*App"!==e})))||void 0===P?void 0:P.length)+" package(s) that have "+(null===V||void 0===V||null===(M=V.value)||void 0===M?void 0:M.label)+" as a direct dependency. Of those package(s)",Object.keys(D).map((function(e,t){return 0===D[e].length?null:Object(k.jsxs)(i.a.Fragment,{children:[", "+D[e].length+("version"===e?" had a version change ":(1===D[e].length?" was ":" were ")+e)+" (",D[e].map((function(e,t,n){var a=e;return t!==n.length-1&&(a+=", "),Object(k.jsx)(kt.a,{underline:"hover",onClick:function(){return I(e)},children:a},t+a)})),")"]},e+t)})),"."]}),Object(k.jsx)(qt,{mergedGraph:T})]})]})},Vt=i.a.createContext(),Dt=function(e){var t=e.mergedGraph,n=Object(a.useState)(""),i=Object(v.a)(n,2),r=i[0],o=i[1],l=Object(a.useState)(),c=Object(v.a)(l,2),s=c[0],d=c[1];return t?Object(k.jsx)(Vt.Provider,{value:{selected:s,setSelected:d},children:Object(k.jsxs)(j.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"flex-start",mt:2,children:[Object(k.jsx)(j.a,{item:!0,s:12,md:6,children:Object(k.jsxs)(L.a,{sx:{padding:2},children:[Object(k.jsx)(R,{onChange:function(e){o(e.target.value)},lefticon:Object(k.jsx)(T.a,{})}),Object(k.jsx)(Wt,{search:r,filteredGraph:t})]})}),Object(k.jsx)(j.a,{item:!0,s:12,md:6,children:s?Object(k.jsx)(It,{mergedGraph:t}):Object(k.jsx)(b.a,{variant:"body1",align:"center",children:"No package selected"})})]})}):null};function Wt(e){var t,n=e.search,r=void 0===n?"":n,o=e.filteredGraph,l=Object(a.useState)("asc"),c=Object(v.a)(l,2),s=c[0],d=c[1],u=i.a.useState("name"),j=Object(v.a)(u,2),p=j[0],m=j[1],O=i.a.useState(0),f=Object(v.a)(O,2),x=f[0],g=f[1],y=i.a.useState(25),w=Object(v.a)(y,2),_=w[0],E=w[1],A=i.a.useState([]),C=Object(v.a)(A,2),S=C[0],N=C[1],L=null!==(t=Object(a.useContext)(Vt))&&void 0!==t?t:{setSelected:function(){return console.log("missing callback")}},P=L.selected,R=L.setSelected;Object(a.useEffect)((function(){if(o){g(0);var e=[];o.nodes.forEach((function(t){var n,a,i,r,o,l,c;-1!==t.value.depth&&e.push({name:t.value.label,key:t.key,warnings:[],depth:null!==(n=null===(a=t.value)||void 0===a?void 0:a.depth)&&void 0!==n?n:-1,license:null===t||void 0===t||null===(i=t.value)||void 0===i||null===(r=i.metadata)||void 0===r?void 0:r.license,dependencies:t.adjacents.size,change:null===(o=t.value)||void 0===o?void 0:o.change,summary:null===t||void 0===t||null===(l=t.value)||void 0===l||null===(c=l.metadata)||void 0===c?void 0:c.summary})})),N(e)}}),[o]);var M=x>0?Math.max(0,(1+x)*_-S.length):0;return Object(k.jsxs)(h.a,{sx:{width:"100%"},children:[Object(k.jsx)(at.a,{children:Object(k.jsxs)(it.a,{sx:{minWidth:750},size:"medium",children:[Object(k.jsx)(yt,{order:s,orderBy:p,onRequestSort:function(e,t){d(p===t&&"asc"===s?"desc":"asc"),m(t)}}),Object(k.jsxs)(rt.a,{children:[mt(S,pt(s,p)).filter((function(e){return e.name.includes(r)})).slice(x*_,x*_+_).map((function(e,t){var n="enhanced-table-checkbox-".concat(t),a="removed"===e.change?"error":"added"===e.change?"success":void 0;return Object(k.jsxs)(i.a.Fragment,{children:[Object(k.jsxs)(ot.a,{hover:!0,onClick:function(){return R(e.key)},tabIndex:-1,selected:P===e.key,children:[Object(k.jsx)(lt.a,{component:"th",id:n,scope:"row",children:Object(k.jsxs)(h.a,{display:"flex",children:["removed"===e.change?Object(k.jsx)(vt.a,{color:a}):"added"===e.change?Object(k.jsx)(dt.a,{color:a}):Object(k.jsx)(ht.a,{}),Object(k.jsx)(b.a,{ml:2,children:e.name})]})}),Object(k.jsx)(lt.a,{align:"right",children:e.depth}),Object(k.jsx)(lt.a,{align:"right",children:e.license}),Object(k.jsx)(lt.a,{align:"right",children:e.dependencies})]}),Object(k.jsx)(ot.a,{children:Object(k.jsx)(lt.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6})})]},e.name)})),M>0&&Object(k.jsx)(ot.a,{style:{height:53*M},children:Object(k.jsx)(lt.a,{colSpan:6})})]})]})}),Object(k.jsx)(ct.a,{rowsPerPageOptions:[5,10,25],component:"div",count:S.length,rowsPerPage:_,page:x,onPageChange:function(e,t){g(t)},onRowsPerPageChange:function(e){E(parseInt(e.target.value,10)),g(0)}})]})}Object(re.a)((function(e){return{lockfile:{overflow:"scroll",paddingLeft:e.spacing(1)}}}));var zt=function(e){var t,n,a,r,o,l=e.metrics,c=i.a.useState("newGraph"),s=Object(v.a)(c,2),d=s[0],u=s[1],h=function(e,t){(null===t||void 0===t?void 0:t.length)&&u(t)};return Object(k.jsxs)(j.a,{container:!0,spacing:3,mb:3,mt:1,children:[Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(pe,{cardMeta:{title:"Thoth Advise Summary"},cardBody:Object(k.jsx)(De,{metric:null===l||void 0===l?void 0:l.advise})})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(pe,{cardMeta:{title:"Dependencies Summary"},cardBody:Object(k.jsx)(Ke,{all:null===l||void 0===l||null===(t=l[d])||void 0===t||null===(n=t.dependencies)||void 0===n?void 0:n.all,roots:null===l||void 0===l||null===(a=l[d])||void 0===a||null===(r=a.dependencies)||void 0===r?void 0:r.roots}),cardAction:Object(k.jsx)(We,{value:d,onChange:h})})}),Object(k.jsx)(j.a,{item:!0,xs:12,md:6,children:Object(k.jsx)(pe,{cardMeta:{title:"Licenses Summary"},cardBody:Object(k.jsx)(nt,{metric:null===l||void 0===l||null===(o=l[d])||void 0===o?void 0:o.licenses}),cardAction:Object(k.jsx)(We,{value:d,onChange:h})})})]})},Ft=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://pypi.org/simple";return q.a.get(I+"/python/package/dependencies",{params:{name:e,version:t,index:n},headers:{accept:"application/json"}})},Gt=function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.a.get(I+"/advise/python/"+t,{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.a.get(I+"/advise/python/"+t+"/log",{headers:{accept:"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kt=n(32);function Qt(e,t){var n,i,r=z(e),o=(n=e,Object(c.useQueries)(n.map((function(e){return Object(g.a)(Object(g.a)({},i),{},{queryKey:["packageDependencies",e.name,e.version],queryFn:function(){return Ft(e.name,e.version)}})})))),l=Object(a.useMemo)((function(){var e={loading:!1,error:!1,success:!1};return r.length>0?(r.forEach((function(t){switch(t.status){case"error":e.error=!0;break;case"success":e.success=!0;break;default:e.loading=!0}})),e.error?"error":e.loading?"loading":"success"):"loading"}),[r]),s=Object(a.useMemo)((function(){var e=!1;return o.length>0?(o.forEach((function(t){"loading"===t.status&&(e=!0)})),e?"loading":"success"):"loading"}),[o]),d=Object(a.useState)(),u=Object(v.a)(d,2),j=u[0],h=u[1];return Object(a.useEffect)((function(){if("error"!==l&&"loading"!==s&&"loading"!==l){var e=new Mt,n=new Map;o.forEach((function(e){e.isSuccess&&n.set(e.data.data.parameters.name,e.data.data.dependencies)})),r.forEach((function(t){var n,a=null!==(n=t.data.data.metadata)&&void 0!==n?n:t.data.data.info,i={id:a.name.toLowerCase().replace(".","-"),label:a.name,metadata:a};e.addVertex(i.id,i).parents=new Set}));var a=[];Array.from(e.nodes.entries()).forEach((function(t){var i,r,o=Object(v.a)(t,2),l=o[0],c=o[1];n.has(l)?n.get(l).forEach((function(t){var n=e.nodes.get(t.name);n&&(e.addEdge(l,n.value.id),n.parents.add(l),a.push(n.value.id))})):(null===c||void 0===c||null===(i=c.value)||void 0===i||null===(r=i.metadata)||void 0===r?void 0:r.requires_dist)&&c.value.metadata.requires_dist.forEach(function(){var t=Object(S.a)(C.a.mark((function t(n){var i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=e.nodes.get(n.split(" ",1)[0].toLowerCase().replace(".","-")))&&(e.addEdge(l,i.value.id),i.parents.add(l),a.push(i.value.id));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));var i=e.addVertex("*App",{id:"*App",label:"App",depth:-1});a.push("*App");var c=new Map,d=[];for(e.nodes.forEach((function(n,r,o){if(!a.includes(r)||Object.keys(t).includes(r)){var l=o.get(r);l.value.depth=0,l.parents.add("*App"),d.push(l),e.addEdge(i.key,l.key)}}));0!==d.length;){var u=d.pop();if(u&&!c.has(u)){c.set(u);for(var j=u.getAdjacents(),b=0;b<j.length;b++){var p;j[b].value.depth=Math.min(u.value.depth+1,null!==(p=j[b].value.depth)&&void 0!==p?p:u.value.depth+2),d.push(j[b])}}}h(e)}}),[l,s,t]),j}var Jt=function(e){var t=Object(a.useState)(),n=Object(v.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t={all:{},roots:{}},n=[];e.nodes.forEach((function(e){0===e.value.depth&&n.push(e.key)}));var a=new Set;n.forEach((function(n){var i=e.graphSearch(e.nodes.get(n));Array.from(i).forEach((function(e){var i,r,o,l,c;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var s=0===e.value.depth?"roots":1===e.value.depth?"direct":"indirect";t={all:Object(g.a)(Object(g.a)({},t.all),{},Object(G.a)({},s,(null!==(i=t.all[s])&&void 0!==i?i:0)+1)),roots:Object(g.a)(Object(g.a)({},t.roots),{},Object(G.a)({},n,Object(g.a)(Object(g.a)({},null!==(r=t.roots[n])&&void 0!==r?r:null),{},Object(G.a)({},s,(null!==(o=null===(l=t.roots)||void 0===l||null===(c=l[n])||void 0===c?void 0:c[s])&&void 0!==o?o:0)+1))))}}}))})),r(t)}}),[e]),i},Ut=function(e){var t=Object(a.useState)(),n=Object(v.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t={},n=[];e.nodes.forEach((function(e){0===e.value.depth&&n.push(e.key)}));var a=new Set;n.forEach((function(n){var i=e.graphSearch(e.nodes.get(n));Array.from(i).forEach((function(e){var n,i,r,o,l,c;if("*App"!==e.key&&!a.has(e.value.id)){a.add(e.value.id);var s=[];null===(n=null!==(i=null===e||void 0===e||null===(r=e.value)||void 0===r||null===(o=r.metadata)||void 0===o?void 0:o.classifier)&&void 0!==i?i:null===e||void 0===e||null===(l=e.value)||void 0===l||null===(c=l.metadata)||void 0===c?void 0:c.classifiers)||void 0===n||n.forEach((function(t){var n,a,i=t.split(" :: ");"License"===i[0]&&("OSI Approved"===i[1]?s.push({generalLicense:null!==(n=null===i||void 0===i?void 0:i[2])&&void 0!==n?n:e.value.metadata.license,specificLicense:e.value.metadata.license,isOsiApproved:!0}):s.push({generalLicense:null!==(a=null===i||void 0===i?void 0:i[1])&&void 0!==a?a:e.value.metadata.license,specificLicense:e.value.metadata.license,isOsiApproved:!1}))})),0===s.length&&s.push({generalLicense:e.value.metadata.license,specificLicense:e.value.metadata.license,isOsiApproved:null}),s.forEach((function(n){var a;t[n.generalLicense]||(t[n.generalLicense]={packages:{},metadata:{isOsiApproved:n.isOsiApproved}}),t=Object(g.a)(Object(g.a)({},t),{},Object(G.a)({},n.generalLicense,Object(g.a)(Object(g.a)({},t[n.generalLicense]),{},{packages:Object(g.a)(Object(g.a)({},null!==(a=t[n.generalLicense].packages)&&void 0!==a?a:null),{},Object(G.a)({},e.value.label,{depth:e.value.depth,specific:n.specificLicense}))})))}))}}))})),r(t)}}),[e]),i},Yt=function(e,t){var n=Object(a.useState)(),i=Object(v.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){var n,a,i,r;if(e&&t){var l={added:0,removed:0,version:0,unchanged:0,justification:{},build:null};e.nodes.forEach((function(e){switch(e.value.change){case"added":l.added++;break;case"removed":l.removed++;break;case"version":l.version++;break;default:l.unchanged++}})),l.build="We have analysed an application stack running on ".concat(t.metadata.os_release.name," ").concat(t.metadata.os_release.version,", running Python (").concat(t.metadata.python.implementation_name,") ").concat(t.metadata.python.major,".").concat(t.metadata.python.minor,".").concat(t.metadata.python.micro,". It was Adviser Job ID ").concat(t.metadata.document_id,", by ").concat(t.metadata.analyzer," v").concat(t.metadata.analyzer_version,"."),null===t||void 0===t||null===(n=t.result)||void 0===n||null===(a=n.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r||r.justification.forEach((function(e){l.justification[e.type]=l.justification[e.type]?l.justification[e.type]+1:1})),o(l)}}),[e,t]),r},Zt=n(400),Xt=function(e){var t=e.analysis_id;return Object(k.jsxs)("div",{children:['`"',t,'"` not found']})},$t=function(e){var t=e.children,n=Object(u.g)();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N.a,{onClick:function(){return n("/")},children:"go back"}),Object(k.jsx)("div",{children:t})]})},en=function(){var e,t,n,i,r,o,l,s,d,j,h,b,p,m,O,f,x=Object(u.h)().analysis_id,y=function(e,t){return Object(c.useQuery)(Object(g.a)(Object(g.a)({},t),{},{queryKey:["adviseDocument",e],queryFn:function(){return Gt(e)}}))}(x,{useErrorBoundary:!1,refetchInterval:function(e){var t;return!!(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.status)&&1e4}}),w=function(e,t){return Object(c.useQuery)(Object(g.a)(Object(g.a)({},t),{},{queryKey:["adviseLogs",e],queryFn:function(){return Ht(e)}}))}(x,{useErrorBoundary:!1,refetchInterval:function(){var e,t;return!!(null===(e=y.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.status)&&1e4}}),_=Object(a.useMemo)((function(){var e,t,n,a;if(y.isSuccess&&(null===(e=y.data.data)||void 0===e||null===(t=e.result)||void 0===t||null===(n=t.parameters)||void 0===n||null===(a=n.project)||void 0===a?void 0:a.requirements_locked))return _e(y.data.data.result.parameters.project.requirements_locked)}),[y]),E=Object(a.useMemo)((function(){var e,t,n,a,i,r;if(y.isSuccess&&(null===(e=y.data.data)||void 0===e||null===(t=e.result)||void 0===t||null===(n=t.report)||void 0===n||null===(a=n.products)||void 0===a||null===(i=a[0])||void 0===i||null===(r=i.project)||void 0===r?void 0:r.requirements_locked))return _e(y.data.data.result.report.products[0].project.requirements_locked)}),[y]),A=Qt(null!==_&&void 0!==_?_:[],null===(e=y.data)||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.result)||void 0===n||null===(i=n.parameters)||void 0===i||null===(r=i.project)||void 0===r||null===(o=r.requirements)||void 0===o?void 0:o.packages),C=Qt(null!==E&&void 0!==E?E:[],null===(l=y.data)||void 0===l||null===(s=l.data)||void 0===s||null===(d=s.result)||void 0===d||null===(j=d.report)||void 0===j||null===(h=j.products)||void 0===h||null===(b=h[0])||void 0===b?void 0:b.dependency_graph),S=function(e,t,n){var i=Object(a.useState)(),r=Object(v.a)(i,2),o=r[0],l=r[1],c=Object(Kt.a)();return Object(a.useEffect)((function(){var a,i,r;if(e&&t){var o=[],s=new Mt;t.nodes.forEach((function(n,a){var i,r,o,l,d,u,v,j,h,b,p,m,O,f,x,y,k,w,_,E,A,C,S,N,L,P,R,M,T,B,q,I,V=t.nodes.get(a);e.nodes.has(a)?(V.value=Object(g.a)(Object(g.a)({},V.value),{},{label:n.value.label+" "+(null!==(i=null===n||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.metadata)||void 0===o?void 0:o.version)&&void 0!==i?i:""),dependencies:n.adjacents.size,license:null!==(l=null===n||void 0===n||null===(d=n.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.license)&&void 0!==l?l:"",lockfile:["new","old"]}),(null===n||void 0===n||null===(v=n.value)||void 0===v||null===(j=v.metadata)||void 0===j?void 0:j.version)===(null===(h=e.nodes.get(a))||void 0===h||null===(b=h.value)||void 0===b||null===(p=b.metadata)||void 0===p?void 0:p.version)?V.value=Object(g.a)(Object(g.a)({},V.value),{},{version:null!==(m=null===n||void 0===n||null===(O=n.value)||void 0===O||null===(f=O.metadata)||void 0===f?void 0:f.version)&&void 0!==m?m:"",change:"unchanged"}):(V.value=Object(g.a)(Object(g.a)({},V.value),{},{change:"version",version:null!==(x=null===n||void 0===n||null===(y=n.value)||void 0===y||null===(k=y.metadata)||void 0===k?void 0:k.version)&&void 0!==x?x:"",oldVersion:null!==(w=null===(_=e.nodes.get(a))||void 0===_||null===(E=_.value)||void 0===E||null===(A=E.metadata)||void 0===A?void 0:A.version)&&void 0!==w?w:"",font:{color:c.palette.success.main}}),V.parents=Object(Ae.a)(new Set([].concat(Object(Ae.a)(V.parents),Object(Ae.a)(null!==(C=null===(S=e.nodes.get(a))||void 0===S?void 0:S.parents)&&void 0!==C?C:[])))),e.nodes.get(a).getAdjacents().forEach((function(e){return V.adjacents.add(e)})),t.nodes.get(a).getAdjacents().forEach((function(e){return V.adjacents.add(e)})))):V.value=Object(g.a)(Object(g.a)({},V.value),{},{change:"added",label:n.value.label+" "+(null!==(N=null===n||void 0===n||null===(L=n.value)||void 0===L||null===(P=L.metadata)||void 0===P?void 0:P.version)&&void 0!==N?N:""),font:{color:c.palette.success.main},color:c.palette.success.main,version:null!==(R=null===n||void 0===n||null===(M=n.value)||void 0===M||null===(T=M.metadata)||void 0===T?void 0:T.version)&&void 0!==R?R:"",dependencies:n.adjacents.size,license:null!==(B=null===n||void 0===n||null===(q=n.value)||void 0===q||null===(I=q.metadata)||void 0===I?void 0:I.license)&&void 0!==B?B:"",lockfile:["new"]}),s.nodes.set(a,V)})),e.nodes.forEach((function(n,a){var i,r,o,l,d,u,v,j,h,b=e.nodes.get(a);t.nodes.has(a)||(b.value=Object(g.a)(Object(g.a)({},b.value),{},{change:"removed",label:n.value.label+" "+(null!==(i=null===n||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.metadata)||void 0===o?void 0:o.version)&&void 0!==i?i:""),font:{color:c.palette.error.main},color:c.palette.error.main,version:null!==(l=null===n||void 0===n||null===(d=n.value)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.version)&&void 0!==l?l:"",dependencies:n.adjacents.size,license:null!==(v=null===n||void 0===n||null===(j=n.value)||void 0===j||null===(h=j.metadata)||void 0===h?void 0:h.license)&&void 0!==v?v:"",lockfile:["old"]}),s.nodes.set(a,b))})),e.nodes.forEach((function(e){e.adjacents.forEach((function(t){o.push({to:e.value.id,from:t.value.id,lockfile:"old"})}))})),t.nodes.forEach((function(e){e.adjacents.forEach((function(t){o.push({to:e.value.id,from:t.value.id,lockfile:"new"})}))})),Ce(s.nodes,null===(a=n.result.report)||void 0===a||null===(i=a.products)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.justification),s.visEdges=o,l(s)}}),[e,t,n,c]),o}(A,C,null===(p=y.data)||void 0===p?void 0:p.data),N=function(e,t,n,i){var r=Yt(n,i),o=Jt(e),l=Jt(t),c=Ut(e),s=Ut(t);return Object(a.useMemo)((function(){var e={advise:null,oldGraph:{dependencies:null,licenses:null},newGraph:{dependencies:null,licenses:null}};return r&&(e.advise=r),o&&(e.oldGraph.dependencies=o),o&&(e.oldGraph.licenses=c),l&&(e.newGraph.dependencies=l),s&&(e.newGraph.licenses=s),e}),[r,o,c,l,s])}(A,C,S,null===(m=y.data)||void 0===m?void 0:m.data);return y.isLoading?Object(k.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(k.jsx)(Zt.a,{})}):y.data?Object(k.jsx)($t,{children:Object(k.jsx)(ue,{header:Object(k.jsx)(Re,{adviseDocument:y.data.data,logs:null===(O=w.data)||void 0===O||null===(f=O.data)||void 0===f?void 0:f.log}),children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{path:"summary",element:Object(k.jsx)(zt,{metrics:N})}),Object(k.jsx)(u.b,{path:"details",element:Object(k.jsx)(Dt,{mergedGraph:S})}),Object(k.jsx)(u.b,{path:"*",element:Object(k.jsx)(u.a,{to:"summary"})})]})})}):Object(k.jsx)($t,{children:Object(k.jsx)(Xt,{analysis_id:x})})},tn=Object(re.a)((function(e){return{titleRow:{display:"flex",alignItems:"center"},marginLeft:{marginLeft:e.spacing(2)},linksRow:{display:"flex"}}})),nn=function(e){var t,n,a,i,r,o=e.metadata,l=tn();return Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{className:l.titleRow,children:[Object(k.jsx)(b.a,{variant:"h4",children:Object(k.jsx)("b",{children:null===o||void 0===o?void 0:o.name})}),Object(k.jsx)(b.a,{ml:2,variant:"h6",children:null!==(t=null===o||void 0===o?void 0:o.version)&&void 0!==t?t:"NaN"})]}),Object(k.jsx)(b.a,{gutterBottom:!0,variant:"body1",children:null!==(n=null===o||void 0===o?void 0:o.summary)&&void 0!==n?n:"NaN"}),Object(k.jsxs)("div",{className:l.linksRow,children:[Object(k.jsx)(we,{text:null!==(a=null===o||void 0===o?void 0:o.license)&&void 0!==a?a:"NaN",icon:Object(k.jsx)(_t.a,{})}),Object(k.jsx)(we,{className:l.marginLeft,text:"Latest version published "+Ee(new Date(null===o||void 0===o||null===(i=o.all_versions)||void 0===i||null===(r=i[null===o||void 0===o?void 0:o.latest_version])||void 0===r?void 0:r.date))+" ago.",icon:Object(k.jsx)(Ct.a,{})})]})]})},an=(Object(re.a)((function(e){return{bar:{marginBottom:e.spacing(1)}}})),Object(re.a)((function(e){return{bar:{marginBottom:e.spacing(1)},marginBottom:{marginBottom:e.spacing(2)}}})),Object(re.a)((function(e){return{root:{flexGrow:1,maxWidth:"95%",marginLeft:"auto",marginRight:"auto",paddingRight:e.spacing(3),paddingLeft:e.spacing(3),marginTop:e.spacing(4)}}}))),rn=function(e){var t=e.metadata,n=an();return Object(k.jsx)(j.a,{container:!0,className:n.root,children:Object(k.jsx)(j.a,{item:!0,xs:12,children:Object(k.jsx)(nn,{metadata:t})})})},on=function(e){var t=e.package_name,n=e.package_version;return Object(k.jsxs)("div",{children:['`"',t,n?" "+n:"",'"` not found']})},ln=function(){var e,t,n,a,i,r=Object(u.h)(),o=(n=r.package_name,a=r["*"],Object(c.useQuery)(Object(g.a)(Object(g.a)({},i),{},{queryKey:["packageMetadata",n,a],queryFn:function(){return D(n,a)}})));return o.isLoading?Object(k.jsx)("div",{className:"w-full h-48 flex justify-center items-center",children:Object(k.jsx)(Zt.a,{})}):o.data?Object(k.jsx)($t,{children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{path:"/:package_version",element:Object(k.jsx)(rn,{metadata:null!==(e=o.data.data.metadata)&&void 0!==e?e:o.data.data.info})}),Object(k.jsx)(u.b,{path:"/",element:Object(k.jsx)(rn,{metadata:null!==(t=o.data.data.metadata)&&void 0!==t?t:o.data.data.info})}),Object(k.jsx)(u.b,{path:"*",status:404,element:Object(k.jsx)(ie,{})})]})}):Object(k.jsx)(on,{package_name:r.package_name,package_version:r["*"]})},cn=function(){return Object(k.jsx)(d.a,{basename:"/thoth-search",children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{exact:!0,path:"/",element:Object(k.jsx)(ae,{})}),Object(k.jsx)(u.b,{exact:!0,path:"advise/:analysis_id/*",element:Object(k.jsx)(en,{})}),Object(k.jsx)(u.b,{path:"package/:package_name/*",element:Object(k.jsx)(ln,{})}),Object(k.jsx)(u.b,{path:"*",status:404,element:Object(k.jsx)(ie,{})})]})})},sn=n(418),dn=n(375),un=n(203),vn=Object(un.a)({palette:{background:{default:"#f9f9f9"},primary:{light:"#f5a733",main:"#f39200",dark:"#aa6600"},secondary:{light:"#72cdee",main:"#4fc1ea",dark:"#3787a3"},text:{priamry:"#363636",secondary:"#999"}},typography:{fontFamily:["open sans","sans-serif"],h4:{fontWeight:700,fontSize:"3rem",color:"#363636",lineHeight:1.125},h5:{fontWeight:600,fontSize:"2rem",lineHeight:1.125,color:"#363636"},h6:{fontWeight:600,fontSize:"1.2rem",color:"#444f60",lineHeight:1.5},body1:{fontWeight:400,fontSize:"1.25rem",lineHeight:1.25,color:"#000"},body2:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,color:"#000"},subtitle1:{fontWeight:400,fontSize:"1.25rem",lineHeight:1.25,color:"#999"},subtitle2:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,color:"#999"}}});var jn=function(e){var t=e.children;return Object(k.jsxs)(sn.a,{theme:vn,children:[Object(k.jsx)(dn.a,{}),t]})},hn=a.createContext(void 0),bn=a.createContext(void 0);function pn(e,t){throw t.type,new Error("State dispatch error")}var mn={};function On(e){var t=e.children,n=a.useReducer(pn,mn),i=Object(v.a)(n,2),r=i[0],o=i[1];return Object(k.jsx)(hn.Provider,{value:r,children:Object(k.jsx)(bn.Provider,{value:o,children:t})})}var fn=function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h2",{children:"Oops, something went wrong :( "}),Object(k.jsx)(N.a,{onClick:function(){return window.location.assign(window.location.origin)},children:"Refresh"})]})},xn=function(){return Object(k.jsx)(jn,{children:Object(k.jsx)(On,{children:Object(k.jsx)(l.ErrorBoundary,{FallbackComponent:fn,children:Object(k.jsx)(c.QueryClientProvider,{client:s,children:Object(k.jsx)(ce,{children:Object(k.jsx)(cn,{})})})})})})};var gn=function(){return Object(k.jsx)(xn,{})};o.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(gn,{})}),document.getElementById("root"))}},[[270,1,2]]]);
//# sourceMappingURL=main.9c9d3242.chunk.js.map